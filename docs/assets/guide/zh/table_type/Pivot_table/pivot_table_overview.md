## 透视表介绍

数据透视表又名多维分析表、交叉表、Pivot Table，指的是可以在行维度和列维度放入一个或多个维度，显示维度之间相互关系的一种表格。用户可以一目了然地分析出各种场景指标以及对比，旨在帮助业务分析推动决策。
假设需要分析如下表格所示的销售数据：  
 <div style="width: 80%; text-align: center;">
     <img src="https://lf9-dp-fe-cms-tos.byteorg.com/obj/bit-cloud/VTable/guide/pivot-chart-introduction.png" />
    <p>表格中的每一行存储了某个时间段内某种产品类别在某地区的销售情况</p>
  </div>
在对这样的表数据进行分析时，不同的数据分析师或者不同角色都会基于自己感兴趣的业务角度提出相关的问题，比如：有人关心各个地区的销售额，希望找出销售情况较低的地区；有人需要了解近期内不同产品类别的销售额对比，便于做后期的产品研发······
这些问题中的业务角度，比如地区、类别、时间年份就是维度，“销售额”就是指标。

## 透视表的适用场景

透视表适用于各种数据分析场景，为用户提供了强大的数据探索和分析能力。以下是透视表常见的适用场景：

*   **数据汇总和概览**：透视表可以用于对大量数据进行汇总和概览。通过透视表的聚合功能，用户可以快速计算数据的总计、平均值、总数等统计指标，以便获取数据的整体情况。

*   **多维度分析**：透视表在多维度数据分析方面表现出色。用户可以通过在透视表中选择不同的字段作为行、列和值，探索数据在不同维度下的关系和趋势，从而深入了解数据的细节。

*   **数据比较和趋势分析**：透视表使用户能够快速比较不同数据之间的差异和趋势。通过将数据放置在透视表的行和列中，用户可以轻松地对比不同类别、时间段或其他维度下的数据，并通过可视化图表呈现数据变化的趋势。

*   **异常和异常值分析**：透视表对于发现异常和异常值也非常有用。通过透视表的筛选和过滤功能，用户可以根据特定的条件过滤数据，并快速识别出异常值或异常模式，从而深入分析数据中的异常情况。

*   **业务决策支持**：透视表为业务决策提供了有力支持。通过对数据进行灵活的操作和定制化分析，用户可以从不同角度和维度深入了解业务数据，掌握业务的关键指标和趋势，为决策提供准确的数据支持。

总之，透视表在各种数据分析场景中都具有广泛的应用价值。不论是进行数据汇总和概览，多维度分析，数据比较和趋势分析，异常值分析还是为业务决策提供支持，透视表都能帮助用户深入挖掘数据的洞察，提供有力的数据分析工具。

## VTable透视表的优势

VTable透视表在数据分析方面具有以下优势：

*   **多维度分析**：透视表支持多维度分析，使用户能够在一个表格中同时比较和分析多个维度的数据。

*   **高性能的渲染**：在展示海量数据时，透视表依然能够快速响应用户的操作，避免浏览器卡顿和崩溃。

*   **可视化形式**：透视表提供可视化的数据展示方式，例如柱状图、折线图等，使用户能够更直观地理解和比较数据。

*   **树状直观数据展示**：通过以树状结构呈现维度和指标，用户可以更直观地掌握数据之间的层级关系和比较关系。

*   **灵活布局**：透视表具有灵活的布局和动态性，用户可以根据需要调整行、列和值的排布。

*   **自定义样式**：可根据维度或者指标来分别定义不同的展示样式。

## 透视表基本概念

![image](https://lf9-dp-fe-cms-tos.byteorg.com/obj/bit-cloud/4f62a673241122408f7245401.png)

### 维度

维度 (Dimension)：用来对数据进行分类和人们观察业务情况的角度；例如：国家，省份，类别，产品名称。

### 维度的层次

维度的层次 (Dimension Level)：根据维度细节程度不同，划分出来的一类属性，是维度预先定义的不同级别。例如，日期维度的层次包括年、月、日；地域层次包括：国家、地区、省份、城市。

### 维度成员

维度成员 (Dimension Value)：是各维度上数据项的取值，例如，日期维度的层次月的维度成员有：1月、2月、3月等，地区的成员有：东北，华北，华中等；

### 指标

指标 (Indicator)：用来描述业务情况的数据，例如，销售额、成本、利润等度量值。

### 行表头树

行表头树（Row Tree）：以树状结构表示行维度层级关系的表头。

### 列表头树

列表头树（Column Tree）：以树状结构表示列维度层级关系的表头。

### 角头

角头（Corner）：位于行表头和列表头交叉区域的单元格，用于显示指标标题和其他辅助信息。

## 概念映射到配置项

我们将下图透视表的配置为例，行列维度给有两个，指标也有两个。

![image](https://lf9-dp-fe-cms-tos.byteorg.com/obj/bit-cloud/eb08aeafba39ab34c8a08c60c.jpeg)

    {
        rows: [
          {
            dimensionKey: '类别',
            title: '类别',
          },
          {
            dimensionKey: '子类别',
            title: '子类别',
          }
        ],
        columns: 
        [
          {
            dimensionKey: '地区',
            title: '地区',
            headerFormat(value) {
              return `${value}地区`;
            },
          },
          {
            dimensionKey: '邮寄方式',
            title: '邮寄方式',
            headerFormat(value) {
              return `${value}邮寄方式`;
            },
          }
        ],
      indicators: [
          {
            indicatorKey: '1',
            title: '销售额',
          },
          {
            indicatorKey: '2',
            title: '利润',
          }
        ],
    }

在上面这份配置中，rows和columns定义了行表头和列表头对应的**维度**基本信息，包括title，headerStyle, format等。

indicators定义了**指标**的基本信息，包括title，style, format等。
